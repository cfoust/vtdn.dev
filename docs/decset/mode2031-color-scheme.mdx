---
sidebar_position: 24
title: "Color scheme reporting"
sidebar_label: "Color scheme reporting"
description: "Mode 2031 — Light/dark notifications"
feature_id: "mode2031_color_scheme"
data_file: "decset-modes"
---

:::warning[AI-Generated Content]
This page was generated with the assistance of AI and may contain inaccuracies. It is intended as a starting point and should be verified against the linked specifications.
:::

<StatusBadges status={{ experimental: true }} />

**Color Scheme Reporting** (Mode 2031) is a DECSET/DECRST mode that enables the terminal to notify applications when the color scheme changes between light and dark modes.

## Syntax

```
CSI ? 2031 h    DECSET — Enable color scheme change reporting
CSI ? 2031 l    DECRST — Disable color scheme change reporting
```

<FormalSyntax grammar={`
DECSET-mode2031 = 0x1b, "[", "?", "2", "0", "3", "1", "h" ;
DECRST-mode2031 = 0x1b, "[", "?", "2", "0", "3", "1", "l" ;
`} />

## Description

Mode 2031 enables applications to receive notifications when the terminal's color scheme changes. This allows applications to dynamically adapt their color palette when the user switches between light and dark modes at the operating system or terminal level.

- **Set** — The terminal sends a report whenever the color scheme changes.
- **Reset** — Color scheme changes are not reported. This is the default.

### Report format

When the color scheme changes and Mode 2031 is enabled, the terminal sends a DECRPM-style report:

```
CSI ? 997 n
```

The application can then query the current color scheme using:

```
CSI ? 996 n
```

The terminal responds with:

| Response | Meaning |
|----------|---------|
| `CSI ? 997 ; 1 n` | Dark mode |
| `CSI ? 997 ; 2 n` | Light mode |

### Use cases

Color scheme reporting is valuable for:

- **TUI applications** that want to automatically switch between light and dark themes when the operating system or terminal theme changes
- **Shell prompts** that use different color palettes for readability in light vs dark backgrounds
- **Terminal-based editors** that adapt syntax highlighting colors based on the background

### Querying without Mode 2031

Even without enabling Mode 2031, an application can perform a one-time query of the current color scheme using `CSI ? 996 n`. Mode 2031 adds the ability to receive ongoing notifications as changes occur, rather than needing to poll.

### Alternative approaches

Applications can also detect the background color by querying the terminal's background color using OSC 11 (report background color). This returns the actual RGB values, from which the application can infer whether the scheme is light or dark. Mode 2031 provides a more direct and reliable signal.

:::note
Mode 2031 is a recent proposal and terminal support varies. Applications should fall back to OSC 11 background color queries or static configuration if Mode 2031 is not available.
:::

## Examples

```bash
printf '\e[?2031h'   # Enable color scheme change reporting

# Query current color scheme:
printf '\e[?996n'
# Response: \e[?997;1n (dark) or \e[?997;2n (light)

# When the user switches themes, the terminal sends:
#   \e[?997n
# The application should then re-query with \e[?996n

printf '\e[?2031l'   # Disable color scheme change reporting
```

## Specifications

<SpecificationsTable />

## Terminal support

<FeatureCompatTable />

## See also

- [Grapheme Clustering — Mode 2027](/docs/decset/mode2027-grapheme) — Another modern terminal capability mode
- [Synchronized Output — Mode 2026](/docs/decset/mode2026-sync-output) — Tear-free rendering for theme transitions
