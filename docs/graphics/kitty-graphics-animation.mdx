---
sidebar_position: 4
title: "Kitty graphics: animation"
sidebar_label: "Kitty graphics: animation"
description: "Animation support"
feature_id: "kitty_graphics_animation"
data_file: "graphics"
---

:::warning[AI-Generated Content]
This page was generated with the assistance of AI and may contain inaccuracies. It is intended as a starting point and should be verified against the linked specifications.
:::

<StatusBadges status={{ experimental: true }} />

**Kitty graphics: animation** extends the Kitty graphics protocol with frame-based animation support. Applications can define multiple frames for an image, control inter-frame timing, and specify how frames are composited together.

## Syntax

```
APC G a=f,... ; payload ST      Animation frame command
APC G a=a,... ST                Animation control command
```

<FormalSyntax grammar={`
animation-frame   = 0x1b, "_G", frame-data, [ ";", payload ], ( 0x1b, "\\\\" ) ;
animation-control = 0x1b, "_G", control-data, ( 0x1b, "\\\\" ) ;
frame-data        = "a=f", { ",", key-value } ;
control-data      = "a=a", { ",", key-value } ;
key-value         = key, "=", value ;
key               = letter, { letter } ;
value             = char, { char } ;
payload           = base64-char, { base64-char } ;
base64-char       = "A" | "B" | "C" | "D" | "E" | "F" | "G" | "H" | "I" | "J"
                  | "K" | "L" | "M" | "N" | "O" | "P" | "Q" | "R" | "S" | "T"
                  | "U" | "V" | "W" | "X" | "Y" | "Z"
                  | "a" | "b" | "c" | "d" | "e" | "f" | "g" | "h" | "i" | "j"
                  | "k" | "l" | "m" | "n" | "o" | "p" | "q" | "r" | "s" | "t"
                  | "u" | "v" | "w" | "x" | "y" | "z"
                  | "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
                  | "+" | "/" | "=" ;
letter            = "a" | "b" | "c" | "d" | "e" | "f" | "g" | "h" | "i" | "j"
                  | "k" | "l" | "m" | "n" | "o" | "p" | "q" | "r" | "s" | "t"
                  | "u" | "v" | "w" | "x" | "y" | "z" ;
char              = letter | digit ;
digit             = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" ;
`} />

### Parameters

**Frame editing keys (when `a=f`):**

| Key | Description | Default |
|-----|-------------|---------|
| `i` | Image ID to add frames to | (required) |
| `r` | Frame number to edit or create | Append new frame |
| `x` | X offset of the frame data within the image canvas | `0` |
| `y` | Y offset of the frame data within the image canvas | `0` |
| `c` | Composition mode for this frame (see below) | `0` |
| `z` | Gap in milliseconds before showing the next frame | `0` (use previous gap) |
| `f` | Pixel format (`24` for RGB, `32` for RGBA, `100` for PNG) | `32` |
| `s` | Frame data width in pixels | Image width |
| `v` | Frame data height in pixels | Image height |

**Composition modes (`c`):**

| Value | Mode | Description |
|-------|------|-------------|
| `0` | Overwrite | The frame data completely replaces the canvas at the specified offset |
| `1` | Blend (alpha composite) | The frame data is alpha-composited over the existing canvas content |

**Animation control keys (when `a=a`):**

| Key | Description | Values |
|-----|-------------|--------|
| `i` | Image ID to control | (required) |
| `s` | Animation state | `1` (stop), `2` (run/loop), `3` (run once and show last frame) |
| `r` | Frame to jump to | Frame number (1-based) |
| `z` | Default gap in milliseconds | Integer |
| `v` | Number of loops | `0` (infinite), or a positive integer |

## Description

The animation extension builds on top of the Kitty graphics protocol's image storage model. An animated image is a single image ID with multiple **frames**. The first frame is the base image transmitted with the standard `a=t` or `a=T` action. Additional frames are added using the `a=f` action.

### Frame model

Each frame consists of pixel data that is drawn onto the image canvas at a specified offset (`x`, `y`). The **composition mode** determines how the new frame data interacts with the existing canvas:

- **Overwrite** (`c=0`): The frame's pixels replace the corresponding region of the canvas. This is the simplest mode, suitable for full-frame updates.
- **Blend** (`c=1`): The frame's pixels are alpha-composited over the canvas. This allows partial updates where only changed regions are sent, with transparent pixels preserving the previous frame's content.

### Timing

The **gap** (`z`) specifies the delay in milliseconds before advancing to the next frame. Each frame can have its own gap value, or a default can be set via the animation control command. A gap of `0` means the frame inherits the previously set gap value.

### Playback control

After all frames are defined, the animation can be started, stopped, or reset using the `a=a` (animation control) action:

- Set `s=2` to start looping the animation
- Set `s=3` to play through once and stop on the last frame
- Set `s=1` to stop the animation
- Set `r=N` to jump to a specific frame
- Set `v=N` to limit the number of loops

:::note
Animations consume terminal resources proportional to the number and size of frames. Applications should delete animated images when they are no longer needed using the standard Kitty graphics delete command (`a=d`).
:::

## Examples

```bash
# Step 1: Transmit the base image (frame 1) with ID 7
printf '\e_Ga=T,i=7,f=32,s=100,v=100;...base64-frame1...\e\\'

# Step 2: Add frame 2 with a 100ms gap
printf '\e_Ga=f,i=7,z=100,f=32,s=100,v=100;...base64-frame2...\e\\'

# Step 3: Add frame 3 with a 100ms gap, using alpha blending
printf '\e_Ga=f,i=7,z=100,c=1,f=32,s=100,v=100;...base64-frame3...\e\\'

# Start the animation (loop forever)
printf '\e_Ga=a,i=7,s=2\e\\'

# Play the animation once
printf '\e_Ga=a,i=7,s=3\e\\'

# Stop the animation
printf '\e_Ga=a,i=7,s=1\e\\'

# Jump to frame 2 and set gap to 200ms
printf '\e_Ga=a,i=7,r=2,z=200\e\\'

# Loop 3 times then stop
printf '\e_Ga=a,i=7,s=2,v=3\e\\'
```

## Specifications

<SpecificationsTable />

## Terminal support

<FeatureCompatTable />

## See also

- [Kitty graphics protocol](/docs/graphics/kitty-graphics) -- Base protocol for transmitting and displaying images
- [Kitty graphics: Unicode placeholders](/docs/graphics/kitty-graphics-unicode) -- Place images at cell positions using Unicode characters
- [Sixel graphics](/docs/graphics/sixel) -- Legacy bitmap protocol (some implementations support Sixel animation)
