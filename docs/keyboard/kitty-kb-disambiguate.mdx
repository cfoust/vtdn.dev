---
sidebar_position: 2
title: "Disambiguate"
sidebar_label: "Disambiguate"
description: "Kitty keyboard flag 1"
feature_id: "kitty_kb_disambiguate"
data_file: "keyboard-input"
---

:::warning[AI-Generated Content]
This page was generated with the assistance of AI and may contain inaccuracies. It is intended as a starting point and should be verified against the linked specifications.
:::

<StatusBadges status={{ experimental: true }} />

**Disambiguate** (flag 1) is the most fundamental enhancement in the Kitty keyboard protocol. When enabled, keys that would normally produce ambiguous byte sequences instead send unambiguous CSI-based escape codes, eliminating the conflicts between control codes, modifier combinations, and special keys that have plagued terminal input for decades.

## Syntax

```
CSI > 1 u           Enable disambiguate mode
CSI number ; modifiers u    Disambiguated key event
```

<FormalSyntax grammar={`
enable      = 0x1b, "[", ">", "1", "u" ;
key-event   = 0x1b, "[", key-code, [ ";", modifiers ], "u" ;
key-code    = digit, { digit } ;             (* Unicode codepoint of the key *)
modifiers   = digit, { digit } ;             (* modifier bitmask + 1 *)
digit       = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" ;
`} />

## Description

In legacy terminal input, many distinct key presses produce identical byte sequences. For example:

| Key press | Legacy byte(s) | Conflict |
|-----------|----------------|----------|
| Enter | `0x0d` | Same as Ctrl+M |
| Tab | `0x09` | Same as Ctrl+I |
| Backspace | `0x7f` or `0x08` | Same as Ctrl+? or Ctrl+H |
| Escape | `0x1b` | Same as Alt+[ prefix |
| Ctrl+[ | `0x1b` | Same as Escape |

With disambiguate mode enabled, these keys send CSI u sequences based on their Unicode codepoints instead:

| Key press | Disambiguated sequence | Codepoint |
|-----------|----------------------|-----------|
| Enter | `CSI 13 u` | U+000D |
| Tab | `CSI 9 u` | U+0009 |
| Backspace | `CSI 127 u` | U+007F |
| Escape | `CSI 27 u` | U+001B |

When modifiers are held, the modifier bitmask (plus 1) is included as a second parameter. For example, Ctrl+Enter sends `CSI 13 ; 5 u` (modifier bitmask 4 for Ctrl, plus 1 = 5).

Plain printable characters without modifiers (other than Shift) are still sent as their literal UTF-8 encoding. This flag only changes the encoding of keys that would otherwise be ambiguous. This means that typing regular text is completely unaffected.

### Keys affected

Disambiguate mode specifically targets:

- **Functional keys** that traditionally send C0 control codes: Enter, Tab, Backspace, Escape
- **Modified key combinations** where Ctrl or Alt would create ambiguous sequences (e.g., Ctrl+A normally sends `0x01`, but with this flag sends `CSI 97 ; 5 u`)
- **Keys that conflict** with CSI/SS3 sequences: function keys, arrow keys, Home, End, etc., get standardized CSI u encoding when combined with modifiers

## Examples

```bash
# Enable disambiguate mode
printf '\e[>1u'

# Now pressing Enter produces: ESC [ 1 3 u
# Instead of: 0x0d

# Pressing Ctrl+Enter produces: ESC [ 1 3 ; 5 u
# (13 = Enter codepoint, 5 = Ctrl modifier + 1)

# Pressing Shift+Tab produces: ESC [ 9 ; 2 u
# (9 = Tab codepoint, 2 = Shift modifier + 1)

# Pressing Escape produces: ESC [ 2 7 u
# Instead of: 0x1b

# Regular typing (e.g., 'a') is unchanged: sends 0x61

# Restore previous mode
printf '\e[<u'
```

## Specifications

<SpecificationsTable />

## Terminal support

<FeatureCompatTable />

## See also

- [Kitty Keyboard Protocol](/docs/keyboard/kitty-keyboard) -- Overview of the full protocol
- [Report Event Types](/docs/keyboard/kitty-kb-event-types) -- Flag 2: distinguish press, repeat, and release
- [All Keys as Escape Codes](/docs/keyboard/kitty-kb-all-keys) -- Flag 8: extend CSI u to all keys
